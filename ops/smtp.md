# បង្កើតម៉ាស៊ីនមេផ្ញើសំបុត្រ SMTP ផ្ទាល់ខ្លួនរបស់អ្នក។

## បុព្វកថា

SMTP អាចទិញសេវាកម្មដោយផ្ទាល់ពីអ្នកលក់តាមពពក ដូចជា៖

* [ក្រុមហ៊ុន Amazon SES SMTP](https://docs.aws.amazon.com/ses/latest/dg/send-email-smtp.html)
* [Ali cloud email ជំរុញ](https://www.alibabacloud.com/help/directmail/latest/three-mail-sending-methods)

អ្នកក៏អាចបង្កើតម៉ាស៊ីនមេសំបុត្រផ្ទាល់ខ្លួនរបស់អ្នកផងដែរ - ការផ្ញើគ្មានដែនកំណត់ តម្លៃសរុបទាប។

ខាងក្រោមនេះ យើងបង្ហាញមួយជំហានម្តង ៗ អំពីរបៀបបង្កើតម៉ាស៊ីនមេសំបុត្ររបស់យើង។

## ការជ្រើសរើសម៉ាស៊ីនមេ

ម៉ាស៊ីនមេ SMTP ដែលបង្ហោះដោយខ្លួនឯងទាមទារ IP សាធារណៈដែលមានច្រក 25, 456 និង 587 បើក។

ពពកសាធារណៈដែលប្រើជាទូទៅបានបិទច្រកទាំងនេះតាមលំនាំដើម ហើយវាអាចបើកពួកវាបានដោយការចេញបញ្ជាការងារ ប៉ុន្តែវាពិតជាមានបញ្ហាខ្លាំងណាស់។

ខ្ញុំសូមណែនាំឱ្យទិញពីម៉ាស៊ីនដែលមានច្រកទាំងនេះបើក ហើយគាំទ្រការដំឡើងឈ្មោះដែនបញ្ច្រាស។

នៅទីនេះខ្ញុំសូមណែនាំ [Contabo](https://contabo.com) ។

Contabo គឺជាអ្នកផ្តល់សេវាបង្ហោះដែលមានមូលដ្ឋាននៅទីក្រុង Munich ប្រទេសអាល្លឺម៉ង់ដែលបានបង្កើតឡើងក្នុងឆ្នាំ 2003 ជាមួយនឹងតម្លៃប្រកួតប្រជែងខ្លាំង។

ប្រសិនបើអ្នកជ្រើសរើសអឺរ៉ូជារូបិយប័ណ្ណនៃការទិញ តម្លៃនឹងថោកជាង (ម៉ាស៊ីនមេដែលមានអង្គចងចាំ 8GB និងស៊ីភីយូ 4 មានតម្លៃប្រហែល 529 យន់ក្នុងមួយឆ្នាំ ហើយថ្លៃដំឡើងដំបូងគឺមិនគិតថ្លៃក្នុងមួយឆ្នាំ)។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/UoAQkwY.webp)

នៅពេលបញ្ជាទិញ ចំណាំ `prefer AMD` ហើយម៉ាស៊ីនមេដែលមានស៊ីភីយូ AMD នឹងមានដំណើរការប្រសើរជាងមុន។

ខាងក្រោមនេះ ខ្ញុំនឹងលើកយក VPS របស់ Contabo ជាឧទាហរណ៍ ដើម្បីបង្ហាញពីរបៀបបង្កើត mail server ផ្ទាល់ខ្លួនរបស់អ្នក។

## ការកំណត់រចនាសម្ព័ន្ធប្រព័ន្ធអ៊ូប៊ុនទូ

ប្រព័ន្ធប្រតិបត្តិការនៅទីនេះគឺអ៊ូប៊ុនទូ 22.04

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/smpIu1F.webp)

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/m7Mwjwr.webp)

ប្រសិនបើម៉ាស៊ីនមេនៅលើអេក្រង់ ssh `Welcome to TinyCore 13!` (ដូចបង្ហាញក្នុងរូបខាងក្រោម) វាមានន័យថាប្រព័ន្ធមិនទាន់ត្រូវបានដំឡើងនៅឡើយទេ។ សូមផ្តាច់ ssh ហើយរង់ចាំពីរបីនាទីដើម្បីចូលម្តងទៀត។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/-qKACz9.webp)

នៅពេល `Welcome to Ubuntu 22.04.1 LTS` លេចឡើង ការចាប់ផ្តើមត្រូវបានបញ្ចប់ ហើយអ្នកអាចបន្តជាមួយជំហានខាងក្រោម។

### [ជាជម្រើស] ចាប់ផ្តើមបរិយាកាសអភិវឌ្ឍន៍

ជំហាននេះគឺស្រេចចិត្ត។

ដើម្បីភាពងាយស្រួល ខ្ញុំបានដាក់ការដំឡើង និងការកំណត់ប្រព័ន្ធនៃកម្មវិធី ubuntu នៅក្នុង [github.com/wactax/ops.os/tree/main/ubuntu](https://github.com/wactax/ops.os/tree/main/ubuntu) ។

ដំណើរការពាក្យបញ្ជាខាងក្រោមដើម្បីដំឡើងដោយចុចតែម្តង។

```
bash <(curl -s https://raw.githubusercontent.com/wactax/ops.os/main/ubuntu/boot.sh)
```

អ្នក​ប្រើ​ភាសា​ចិន សូម​ប្រើ​ពាក្យ​បញ្ជា​ដូច​ខាង​ក្រោម​ជំនួស​វិញ ហើយ​ភាសា តំបន់​ម៉ោង ជាដើម នឹង​ត្រូវ​បាន​កំណត់​ដោយ​ស្វ័យ​ប្រវត្តិ។

```
CN=1 bash <(curl -s https://ghproxy.com/https://raw.githubusercontent.com/wactax/ops.os/main/ubuntu/boot.sh)
```

### Contabo បើកដំណើរការ IPV6

បើកដំណើរការ IPV6 ដូច្នេះ SMTP ក៏អាចផ្ញើអ៊ីមែលដែលមានអាសយដ្ឋាន IPV6 ផងដែរ។

កែសម្រួល `/etc/sysctl.conf`

កែប្រែ ឬបន្ថែមបន្ទាត់ខាងក្រោម

```
net.ipv6.conf.all.disable_ipv6 = 0
net.ipv6.conf.default.disable_ipv6 = 0
net.ipv6.conf.lo.disable_ipv6 = 0
```

តាមដានជាមួយ [ការបង្រៀន contabo៖ ការបន្ថែមការភ្ជាប់ IPv6 ទៅម៉ាស៊ីនមេរបស់អ្នក។](https://contabo.com/blog/adding-ipv6-connectivity-to-your-server/)

កែសម្រួល `/etc/netplan/01-netcfg.yaml` បន្ថែមបន្ទាត់មួយចំនួនដូចបង្ហាញក្នុងរូបភាពខាងក្រោម (ឯកសារកំណត់រចនាសម្ព័ន្ធលំនាំដើម Contabo VPS មានបន្ទាត់ទាំងនេះរួចហើយ គ្រាន់តែមិនបញ្ចេញមតិ)។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/5MEi41I.webp)

បន្ទាប់មក `netplan apply` ដើម្បីធ្វើឱ្យការកំណត់រចនាសម្ព័ន្ធដែលបានកែប្រែមានប្រសិទ្ធភាព។

បន្ទាប់ពីការកំណត់រចនាសម្ព័ន្ធបានជោគជ័យ អ្នកអាចប្រើ `curl 6.ipw.cn` ដើម្បីមើលអាសយដ្ឋាន ipv6 នៃបណ្តាញខាងក្រៅរបស់អ្នក។

## ក្លូន ops ឃ្លាំងកំណត់រចនាសម្ព័ន្ធ

```
git clone https://github.com/wactax/ops.soft.git
```

## បង្កើតវិញ្ញាបនបត្រ SSL ឥតគិតថ្លៃសម្រាប់ឈ្មោះដែនរបស់អ្នក។

ការផ្ញើសំបុត្រតម្រូវឱ្យមានវិញ្ញាបនបត្រ SSL សម្រាប់ការអ៊ិនគ្រីប និងការចុះហត្ថលេខា។

យើងប្រើ [acme.sh](https://github.com/acmesh-official/acme.sh) ដើម្បីបង្កើតវិញ្ញាបនបត្រ។

acme.sh គឺជាឧបករណ៍ចុះហត្ថលេខាវិញ្ញាបនបត្រដោយស្វ័យប្រវត្តិប្រភពបើកចំហ។

បញ្ចូលឃ្លាំងកំណត់រចនាសម្ព័ន្ធ ops.soft រត់ `./ssl.sh` ហើយថត `conf` នឹងត្រូវបានបង្កើតនៅក្នុង **ថតខាងលើ** ។

ស្វែងរកអ្នកផ្តល់ DNS របស់អ្នកពី [acme.sh dnsapi](https://github.com/acmesh-official/acme.sh/wiki/dnsapi) កែសម្រួល `conf/conf.sh` ។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/Qjq1C1i.webp)

បន្ទាប់មកដំណើរការ `./ssl.sh 123.com` ដើម្បីបង្កើតវិញ្ញាបនបត្រ `123.com` និង `*.123.com` សម្រាប់ឈ្មោះដែនរបស់អ្នក។

ការរត់ដំបូងនឹងដំឡើង [acme.sh](https://github.com/acmesh-official/acme.sh) ដោយស្វ័យប្រវត្តិ ហើយបន្ថែមកិច្ចការដែលបានកំណត់ពេលសម្រាប់ការបន្តដោយស្វ័យប្រវត្តិ។ អ្នកអាចឃើញ `crontab -l` មានបន្ទាត់ដូចខាងក្រោម។

```
52 0 * * * "/mnt/www/.acme.sh"/acme.sh --cron --home "/mnt/www/.acme.sh" > /dev/null
```

ផ្លូវសម្រាប់វិញ្ញាបនបត្រដែលបានបង្កើតគឺអ្វីមួយដូចជា `/mnt/www/.acme.sh/123.com_ecc。`

ការបន្តវិញ្ញាបនបត្រនឹងហៅស្គ្រីប `conf/reload/123.com.sh` កែសម្រួលស្គ្រីបនេះ អ្នកអាចបន្ថែមពាក្យបញ្ជាដូចជា `nginx -s reload` ដើម្បីធ្វើបច្ចុប្បន្នភាពឃ្លាំងសម្ងាត់វិញ្ញាបនបត្រនៃកម្មវិធីដែលពាក់ព័ន្ធ។

## បង្កើតម៉ាស៊ីនមេ SMTP ជាមួយ chasquid

[chasquid](https://github.com/albertito/chasquid) គឺជាម៉ាស៊ីនមេ SMTP ប្រភពបើកចំហដែលសរសេរជាភាសា Go ។

ក្នុងនាមជាកម្មវិធីជំនួសសម្រាប់កម្មវិធីម៉ាស៊ីនមេសំបុត្របុរាណដូចជា Postfix និង Sendmail, chasquid គឺសាមញ្ញជាង និងងាយស្រួលប្រើ ហើយវាក៏ងាយស្រួលសម្រាប់ការអភិវឌ្ឍន៍បន្ទាប់បន្សំផងដែរ។

ដំណើរការ `./chasquid/init.sh 123.com` នឹង​ត្រូវ​បាន​ដំឡើង​ដោយ​ស្វ័យ​ប្រវត្តិ​ដោយ​ចុច​មួយ​ដង (ជំនួស 123.com ដោយ​ឈ្មោះ​ដែន​ផ្ញើ​របស់​អ្នក)។

## កំណត់រចនាសម្ព័ន្ធហត្ថលេខាអ៊ីមែល DKIM

DKIM ត្រូវ​បាន​ប្រើ​ដើម្បី​ផ្ញើ​ហត្ថលេខា​អ៊ីមែល​ដើម្បី​ការពារ​សំបុត្រ​មិន​ឱ្យ​ចាត់​ទុក​ថា​ជា​សារ​ឥត​បានការ។

បន្ទាប់ពីពាក្យបញ្ជាដំណើរការដោយជោគជ័យ អ្នកនឹងត្រូវបានប្រាប់ឱ្យកំណត់កំណត់ត្រា DKIM (ដូចបង្ហាញខាងក្រោម)។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/LJWGsmI.webp)

គ្រាន់តែបន្ថែមកំណត់ត្រា TXT ទៅ DNS របស់អ្នក (ដូចបង្ហាញខាងក្រោម)។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/0szKWqV.webp)

## មើលស្ថានភាពសេវាកម្ម និងកំណត់ហេតុ

 `systemctl status chasquid` មើលស្ថានភាពសេវាកម្ម។

ស្ថានភាពនៃប្រតិបត្តិការធម្មតាគឺដូចបង្ហាញក្នុងរូបភាពខាងក្រោម

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/CAwyY4E.webp)

 `grep chasquid /var/log/syslog` ឬ `journalctl -xeu chasquid` អាចមើលកំណត់ហេតុកំហុស។

## ការកំណត់ឈ្មោះដែនបញ្ច្រាស

ឈ្មោះដែនបញ្ច្រាសគឺអនុញ្ញាតឱ្យអាសយដ្ឋាន IP ត្រូវបានដោះស្រាយទៅឈ្មោះដែនដែលត្រូវគ្នា។

ការកំណត់ឈ្មោះដែនបញ្ច្រាសអាចការពារអ៊ីមែលមិនឱ្យត្រូវបានកំណត់ថាជាសារឥតបានការ។

នៅពេលសំបុត្រត្រូវបានទទួល ម៉ាស៊ីនមេទទួលនឹងធ្វើការវិភាគឈ្មោះដែនបញ្ច្រាសនៅលើអាសយដ្ឋាន IP របស់ម៉ាស៊ីនមេផ្ញើ ដើម្បីបញ្ជាក់ថាតើម៉ាស៊ីនមេដែលផ្ញើមានឈ្មោះដែនបញ្ច្រាសត្រឹមត្រូវ។

ប្រសិនបើម៉ាស៊ីនមេបញ្ជូនមិនមានឈ្មោះដែនបញ្ច្រាស ឬប្រសិនបើឈ្មោះដែនបញ្ច្រាសមិនត្រូវគ្នានឹងអាសយដ្ឋាន IP របស់ម៉ាស៊ីនមេផ្ញើនោះ ម៉ាស៊ីនមេដែលទទួលអាចទទួលស្គាល់អ៊ីមែលថាជាសារឥតបានការ ឬបដិសេធវា។

ចូលទៅកាន់ [គេហទំព័រ https://my.contabo.com/rdns](https://my.contabo.com/rdns) ហើយកំណត់រចនាសម្ព័ន្ធដូចបានបង្ហាញខាងក្រោម

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/IIPdBk_.webp)

បន្ទាប់​ពី​កំណត់​ឈ្មោះ​ដែន​បញ្ច្រាស សូម​ចាំ​ថា​ត្រូវ​កំណត់​រចនាសម្ព័ន្ធ​ការ​ដោះស្រាយ​បញ្ជូន​បន្ត​នៃ​ឈ្មោះ​ដែន ipv4 និង ipv6 ទៅ​ម៉ាស៊ីន​មេ។

## កែសម្រួលឈ្មោះម៉ាស៊ីនរបស់ chasquid.conf

កែប្រែ `conf/chasquid/chasquid.conf` ទៅតម្លៃនៃឈ្មោះដែនបញ្ច្រាស។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/6Fw4SQi.webp)

បន្ទាប់មកដំណើរការ `systemctl restart chasquid` ដើម្បីចាប់ផ្តើមសេវាកម្មឡើងវិញ។

## បម្រុងទុក conf ទៅឃ្លាំង git

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/Fier9uv.webp)

ឧទាហរណ៍ ខ្ញុំបម្រុងទុកថត conf ទៅដំណើរការ github ផ្ទាល់ខ្លួនរបស់ខ្ញុំដូចខាងក្រោម

បង្កើតឃ្លាំងឯកជនជាមុនសិន

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/ZSCT1t1.webp)

បញ្ចូលបញ្ជី conf ហើយបញ្ជូនទៅកាន់ឃ្លាំង

```
git init
git add .
git commit -m "init"
git branch -M main
git remote add origin git@github.com:wac-tax-key/conf.git
git push -u origin main
```

## បន្ថែមអ្នកផ្ញើ

រត់

```
chasquid-util user-add i@wac.tax
```

អាចបន្ថែមអ្នកផ្ញើ

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/khHjLof.webp)

### ផ្ទៀងផ្ទាត់ថាពាក្យសម្ងាត់ត្រូវបានកំណត់ត្រឹមត្រូវ។

```
chasquid-util authenticate i@wac.tax --password=xxxxxxx
```

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/e92JHXq.webp)

បន្ទាប់ពីបន្ថែមអ្នកប្រើប្រាស់ `chasquid/domains/wac.tax/users` នឹងត្រូវបានអាប់ដេត កុំភ្លេចបញ្ជូនវាទៅឃ្លាំង។

## DNS បន្ថែមកំណត់ត្រា SPF

SPF (Sender Policy Framework) គឺជាបច្ចេកវិទ្យាផ្ទៀងផ្ទាត់អ៊ីមែលដែលប្រើដើម្បីការពារការក្លែងបន្លំអ៊ីមែល។

វាផ្ទៀងផ្ទាត់អត្តសញ្ញាណរបស់អ្នកផ្ញើសំបុត្រដោយពិនិត្យមើលថាអាសយដ្ឋាន IP របស់អ្នកផ្ញើត្រូវគ្នានឹងកំណត់ត្រា DNS នៃឈ្មោះដែនដែលខ្លួនអះអាងថាជា ការពារអ្នកក្លែងបន្លំពីការផ្ញើអ៊ីមែលក្លែងក្លាយ។

ការបន្ថែមកំណត់ត្រា SPF អាចការពារអ៊ីមែលមិនឱ្យត្រូវបានកំណត់ថាជាសារឥតបានការតាមដែលអាចធ្វើទៅបាន។

ប្រសិនបើម៉ាស៊ីនមេឈ្មោះដែនរបស់អ្នកមិនគាំទ្រប្រភេទ SPF គ្រាន់តែបន្ថែមកំណត់ត្រាប្រភេទ TXT ។

ឧទាហរណ៍ SPF នៃ `wac.tax` មានដូចខាងក្រោម

`v=spf1 a mx include:_spf.wac.tax include:_spf.google.com ~all`

SPF សម្រាប់ `_spf.wac.tax`

`v=spf1 a:smtp.wac.tax ~all`

ចំណាំថាខ្ញុំបាន `include:_spf.google.com` នៅទីនេះ នេះគឺដោយសារតែខ្ញុំនឹងកំណត់រចនាសម្ព័ន្ធ `i@wac.tax` ជាអាសយដ្ឋានផ្ញើនៅក្នុងប្រអប់សំបុត្រ Google នៅពេលក្រោយ។

## ការកំណត់រចនាសម្ព័ន្ធ DNS DMARC

DMARC គឺជាអក្សរកាត់នៃ (ការផ្ទៀងផ្ទាត់សារដែលមានមូលដ្ឋានលើដែន ការរាយការណ៍ និងការអនុលោមតាម) ។

វា​ត្រូវ​បាន​ប្រើ​ដើម្បី​ចាប់​យក​ការ​លោត​ SPF (អាច​បណ្ដាល​មក​ពី​កំហុស​ក្នុង​ការ​កំណត់​រចនាសម្ព័ន្ធ ឬ​អ្នក​ផ្សេង​កំពុង​ធ្វើ​ពុត​ជា​អ្នក​ដើម្បី​ផ្ញើ​សារ​ឥត​បានការ)។

បន្ថែមកំណត់ត្រា TXT `_dmarc` ,

ខ្លឹមសារមានដូចខាងក្រោម

```
v=DMARC1; p=quarantine; fo=1; ruf=mailto:ruf@wac.tax; rua=mailto:rua@wac.tax
```

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/k44P7O3.webp)

អត្ថន័យនៃប៉ារ៉ាម៉ែត្រនីមួយៗមានដូចខាងក្រោម

### p (គោលនយោបាយ)

បង្ហាញពីរបៀបដោះស្រាយអ៊ីម៉ែលដែលបរាជ័យ SPF (Sender Policy Framework) ឬការផ្ទៀងផ្ទាត់ DKIM (DomainKeys Identified Mail)។ ប៉ារ៉ាម៉ែត្រ p អាចត្រូវបានកំណត់ទៅជាតម្លៃមួយក្នុងចំណោមតម្លៃបី៖

* គ្មាន៖ គ្មានសកម្មភាពណាមួយត្រូវបានធ្វើឡើងទេ មានតែលទ្ធផលផ្ទៀងផ្ទាត់ប៉ុណ្ណោះដែលត្រូវបានបញ្ជូនត្រឡប់ទៅអ្នកផ្ញើវិញតាមរយៈយន្តការរាយការណ៍តាមអ៊ីមែល។
* ការដាក់ឱ្យនៅដាច់ពីគេ៖ ដាក់សំបុត្រដែលមិនបានឆ្លងកាត់ការផ្ទៀងផ្ទាត់ទៅក្នុងថតសារឥតបានការ ប៉ុន្តែនឹងមិនបដិសេធសំបុត្រដោយផ្ទាល់នោះទេ។
* បដិសេធ៖ បដិសេធដោយផ្ទាល់នូវអ៊ីមែលដែលបរាជ័យក្នុងការផ្ទៀងផ្ទាត់។

### fo (ជម្រើសបរាជ័យ)

បញ្ជាក់ចំនួនព័ត៌មានដែលបញ្ជូនមកវិញដោយយន្តការរាយការណ៍។ វាអាចត្រូវបានកំណត់ទៅជាតម្លៃមួយក្នុងចំណោមតម្លៃខាងក្រោម៖

* 0៖ រាយការណ៍លទ្ធផលសុពលភាពសម្រាប់សារទាំងអស់។
* 1: រាយការណ៍តែសារដែលបរាជ័យក្នុងការផ្ទៀងផ្ទាត់
* ឃ៖ រាយការណ៍តែការផ្ទៀងផ្ទាត់ឈ្មោះដែនបរាជ័យ
* s៖ រាយការណ៍តែការបរាជ័យការផ្ទៀងផ្ទាត់ SPF ប៉ុណ្ណោះ។
* l៖ រាយការណ៍តែការបរាជ័យការផ្ទៀងផ្ទាត់ DKIM ប៉ុណ្ណោះ។

### rua & ruf

* rua (ការរាយការណ៍ URI សម្រាប់របាយការណ៍សរុប): អាសយដ្ឋានអ៊ីមែលសម្រាប់ការទទួលរបាយការណ៍សរុប
* ruf (រាយការណ៍ URI សម្រាប់របាយការណ៍កោសល្យវិច្ច័យ): អាសយដ្ឋានអ៊ីមែលដើម្បីទទួលបានរបាយការណ៍លម្អិត

## បន្ថែមកំណត់ត្រា MX ដើម្បីបញ្ជូនបន្តអ៊ីមែលទៅ Google Mail

ដោយសារខ្ញុំមិនអាចស្វែងរកប្រអប់សំបុត្រសាជីវកម្មឥតគិតថ្លៃដែលគាំទ្រអាសយដ្ឋានសកល (Catch-All អាចទទួលអ៊ីមែលណាមួយដែលបានផ្ញើទៅឈ្មោះដែននេះ ដោយមិនមានការរឹតបន្តឹងលើបុព្វបទ) ខ្ញុំបានប្រើ chasquid ដើម្បីបញ្ជូនអ៊ីមែលទាំងអស់ទៅកាន់ប្រអប់សំបុត្រ Gmail របស់ខ្ញុំ។

**ប្រសិនបើអ្នកមានប្រអប់សំបុត្រអាជីវកម្មដែលបង់ប្រាក់ផ្ទាល់ខ្លួនរបស់អ្នក សូមកុំកែប្រែ MX ហើយរំលងជំហាននេះ។**

កែសម្រួល `conf/chasquid/domains/wac.tax/aliases` កំណត់ប្រអប់សំបុត្របញ្ជូនបន្ត

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/OBDl2gw.webp)

`*` បង្ហាញពីអ៊ីមែលទាំងអស់ `i` គឺជាបុព្វបទអាសយដ្ឋានអ៊ីមែលរបស់អ្នកប្រើប្រាស់ដែលបានបង្កើតខាងលើ។ ដើម្បីបញ្ជូនសំបុត្រ អ្នកប្រើប្រាស់ម្នាក់ៗត្រូវបន្ថែមបន្ទាត់។

បន្ទាប់មកបន្ថែមកំណត់ត្រា MX (ខ្ញុំចង្អុលដោយផ្ទាល់ទៅអាសយដ្ឋាននៃឈ្មោះដែនបញ្ច្រាសនៅទីនេះ ដូចបង្ហាញក្នុងជួរទីមួយក្នុងរូបភាពខាងក្រោម)។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/7__KrU8.webp)

បន្ទាប់ពីការកំណត់រចនាសម្ព័ន្ធបានបញ្ចប់ អ្នកអាចប្រើអាសយដ្ឋានអ៊ីមែលផ្សេងទៀតដើម្បីផ្ញើអ៊ីមែលទៅ `i@wac.tax` និង `any123@wac.tax` ដើម្បីមើលថាតើអ្នកអាចទទួលអ៊ីមែលនៅក្នុង Gmail ដែរឬទេ។

បើមិនដូច្នោះទេ សូមពិនិត្យមើលកំណត់ហេតុរបស់ chasquid ( `grep chasquid /var/log/syslog` )។

## ផ្ញើអ៊ីមែលទៅ i@wac.tax ជាមួយ Google Mail

បន្ទាប់ពី Google Mail បានទទួលសំបុត្រនោះ ខ្ញុំសង្ឃឹមថានឹងឆ្លើយតបជាមួយ `i@wac.tax` ជំនួសឱ្យ i.wac.tax@gmail.com ។

ចូលទៅកាន់ [https://mail.google.com/mail/u/1/#settings/accounts](https://mail.google.com/mail/u/1/#settings/accounts) ហើយចុច "បន្ថែមអាសយដ្ឋានអ៊ីមែលផ្សេងទៀត"។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/PAvyE3C.webp)

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/_OgLsPT.webp)

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/XIUf6Dc.webp)

បន្ទាប់មកបញ្ចូលលេខកូដផ្ទៀងផ្ទាត់ដែលបានទទួលដោយអ៊ីមែលដែលត្រូវបានបញ្ជូនបន្តទៅ។

ជាចុងក្រោយ វាអាចត្រូវបានកំណត់ជាអាសយដ្ឋានអ្នកផ្ញើលំនាំដើម (រួមជាមួយជម្រើសដើម្បីឆ្លើយតបជាមួយអាសយដ្ឋានដូចគ្នា)។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/a95dO60.webp)

តាមវិធីនេះ យើងបានបញ្ចប់ការបង្កើតម៉ាស៊ីនមេ SMTP ហើយក្នុងពេលតែមួយប្រើ Google Mail ដើម្បីផ្ញើ និងទទួលអ៊ីមែល។

## ផ្ញើអ៊ីមែលសាកល្បង ដើម្បីពិនិត្យមើលថាតើការកំណត់រចនាសម្ព័ន្ធជោគជ័យឬអត់

បញ្ចូល `ops/chasquid`

ដំណើរការ `direnv allow` ឱ្យដំឡើងភាពអាស្រ័យ (direnv ត្រូវបានដំឡើងនៅក្នុងដំណើរការចាប់ផ្តើមតែមួយគ្រាប់មុន ហើយទំពក់មួយត្រូវបានបន្ថែមទៅសែល)

បន្ទាប់មករត់

```
user=i@wac.tax pass=xxxx to=iuser.link@gmail.com ./sendmail.coffee
```

អត្ថន័យនៃប៉ារ៉ាម៉ែត្រមានដូចខាងក្រោម

* អ្នកប្រើប្រាស់៖ ឈ្មោះអ្នកប្រើប្រាស់ SMTP
* ឆ្លងកាត់៖ ពាក្យសម្ងាត់ SMTP
* ទៅ៖ អ្នកទទួល

អ្នកអាចផ្ញើអ៊ីមែលសាកល្បង។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/ae1iWyM.webp)

វាត្រូវបានណែនាំឱ្យប្រើ Gmail ដើម្បីទទួលបានអ៊ីមែលសាកល្បង ដើម្បីពិនិត្យមើលថាតើការកំណត់រចនាសម្ព័ន្ធជោគជ័យឬអត់។

### ការអ៊ិនគ្រីបស្តង់ដារ TLS

ដូចដែលបានបង្ហាញនៅក្នុងរូបភាពខាងក្រោមមានសោតូចមួយនេះដែលមានន័យថាវិញ្ញាបនបត្រ SSL ត្រូវបានបើកដោយជោគជ័យ។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/SrdbAwh.webp)

បន្ទាប់មកចុច "បង្ហាញអ៊ីមែលដើម"

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/qQQsdxg.webp)

### ឌីខេម

ដូចដែលបានបង្ហាញក្នុងរូបភាពខាងក្រោម ទំព័រសំបុត្រដើមរបស់ Gmail បង្ហាញ DKIM ដែលមានន័យថាការកំណត់រចនាសម្ព័ន្ធ DKIM បានជោគជ័យ។

![](https://pub-b8db533c86124200a9d799bf3ba88099.r2.dev/2023/03/an6aXK6.webp)

ពិនិត្យការទទួលនៅក្នុងបឋមកថានៃអ៊ីមែលដើម ហើយអ្នកអាចមើលឃើញថាអាសយដ្ឋានអ្នកផ្ញើគឺ IPV6 ដែលមានន័យថា IPV6 ក៏ត្រូវបានកំណត់រចនាសម្ព័ន្ធដោយជោគជ័យផងដែរ។
